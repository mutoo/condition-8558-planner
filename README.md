# 澳洲签证 Condition 8558 行程规划器

一个帮助持有澳大利亚签证的用户规划和验证行程的单页应用（SPA），确保符合 Condition 8558 的要求。

## Condition 8558 说明

Condition 8558 是澳大利亚签证的常见限制条件：
- 在任意连续的 **18个月** 期间内
- 持有人在澳大利亚的停留时间不得超过 **12个月**（365天）
- 这是一个**滑动窗口**计算，以日为单位

## 功能特性

### 1. 签证设置
- 输入签证开始日期
- 选择签证有效期：18个月、3年、5年、10年或自定义
- 自动计算签证结束日期

### 2. 行程管理
- 添加多组出入境时间
- 自动验证行程是否合法
- 检测行程重叠
- 实时计算 Condition 8558 合规性

### 3. 可视化日历
- 月份列表视图，默认展开第一个月和最后一个月
- 点击月份可展开详细日历
- 颜色编码显示不同状态：
  - **灰色**：普通日期（不在澳洲）
  - **蓝色**：在澳洲停留（合规）
  - **绿色**：有效停留
  - **红色**：违反 Condition 8558
  - **浅灰**：超出签证有效期

### 4. 统计面板
- 签证有效期
- 已规划行程数量
- 总在澳天数
- 违规天数统计

## 使用方法

### 1. 直接在浏览器中打开

直接双击 `index.html` 文件，或者用浏览器打开它。

### 2. 使用本地服务器（推荐）

```bash
# 使用 Python
python -m http.server 8000

# 或使用 Node.js 的 http-server
npx http-server
```

然后在浏览器中访问 `http://localhost:8000`

## 使用步骤

1. **设置签证有效期**
   - 输入签证开始日期
   - 选择签证有效期（18个月/3年/5年/10年/自定义）
   - 点击"开始规划"按钮

2. **添加行程**
   - 输入入境日期和出境日期
   - 点击"添加行程"按钮
   - 系统会自动验证行程是否合法

3. **查看日历**
   - 查看月份列表，颜色表示该月的状态
   - 点击月份可展开详细日历
   - 查看统计面板了解总体情况

## 技术栈

- 纯原生 HTML/CSS/JavaScript
- 无依赖，无需构建工具
- 响应式设计，支持移动设备

## 验证逻辑

应用使用滑动窗口算法验证 Condition 8558：
- 对于行程中的每一天，检查过去18个月内在澳洲的总天数
- 如果超过365天（12个月），则标记为违规
- 实时计算并显示违规状态

## 浏览器支持

- Chrome/Edge（推荐）
- Firefox
- Safari
- 需要支持 ES6+ 特性

## 测试

项目包含完整的单元测试，测试核心功能的正确性。

### 运行测试

1. 在浏览器中打开 `test.html`
2. 测试会自动运行并显示结果
3. 点击"运行所有测试"按钮可以重新运行

### 测试覆盖

- ✅ 工具函数（日期解析、格式化、计算）
- ✅ Condition 8558 验证逻辑
- ✅ 18个月滑动窗口计算
- ✅ 边界情况处理
- ✅ 实际使用场景

测试文件位置：
- `test.html` - 测试页面
- `test.js` - 测试用例

## 注意事项

- 此工具仅供参考，实际签证合规性请咨询专业移民顾问
- 日期计算以日历日为准
- 数据存储在浏览器 localStorage，清除浏览器数据会导致数据丢失

## License

MIT
